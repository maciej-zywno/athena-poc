= content_for :header_title do
  Patients

- breadcrumb :patients, params[:practice_id], params[:department_id]

%table.table.table-striped
  %thead
    %tr
      %th ID
      %th First name
      %th Last name
      %th Email
      %th Date of birth
      %th Address
      %th Status
  %tbody
    - @patient_collection.patients.each do |patient|
      %tr
        %td= patient.patientid
        %td= patient.firstname
        %td= patient.lastname
        %td= patient.email
        %td= patient.dob
        %td= patient.address1
        %td= patient.status
        - unless User.find_by_patient_id(patient.patientid)
          %td= link_to 'Invite', invite_practice_department_patient_path(params[:practice_id], params[:department_id], patient.patientid), method: :post
        %td= link_to 'Delete', practice_department_patient_path(params[:practice_id], params[:department_id], patient.patientid), method: :delete
        %td= link_to 'Show', practice_department_patient_path(params[:practice_id], params[:department_id], patient.patientid)
        %td= link_to 'Edit', edit_practice_department_patient_path(params[:practice_id], params[:department_id], patient.patientid)


%ul.pagination.pull-right
  %li.paginate_button.previous{ class: ("disabled" unless @patient_collection.previous) }
    = link_to 'Previous', practice_department_patients_path(params[:practice_id], params[:department_id], offset:  offset(@patient_collection.previous))
  %li.paginate_button.next{ class: ("disabled" unless @patient_collection.next) }
    = link_to 'Next', practice_department_patients_path(params[:practice_id], params[:department_id], offset: offset(@patient_collection.next))

%br/
= link_to 'New patient', new_practice_department_patient_path(params[:practice_id], params[:department_id]), class: 'btn btn-primary'
